<div class="max-w-7xl mx-auto p-6">
  <div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold">My Watchlist</h1>
    <div class="space-x-2">
      <a routerLink="/movies/list" class="px-3 py-1 rounded-full border hover:bg-gray-50">← Back to list</a>
      <button (click)="clearAll()" class="px-3 py-1 rounded-full border hover:bg-gray-50">Clear all</button>
    </div>
  </div>

  <ng-container *ngIf="(movies$ | async) as movies">
    <div *ngIf="movies.length === 0" class="text-center text-gray-600 p-10">
      <p>Your watchlist is empty.</p>
      <a routerLink="/movies/list" class="text-blue-600 hover:underline">Browse movies</a>
    </div>

    <div *ngIf="movies.length > 0" class="grid grid-cols-[repeat(auto-fill,minmax(220px,1fr))] gap-6">
      <div *ngFor="let m of movies" class="group rounded-2xl overflow-hidden border shadow-sm bg-white">
        <a [routerLink]="['/movies', m.id]">
          <img class="w-full h-[420px] object-cover" [src]="m.posterUrl || FALLBACK" [alt]="m.title" />
        </a>
        <div class="p-3">
          <h3 class="font-semibold text-lg leading-tight">{{ m.title }}</h3>
          <p class="text-sm text-gray-600">{{ m.category }} • {{ m.releaseYear }}</p>
          <div class="mt-3 flex gap-2">
            <a [routerLink]="['/movies', m.id]" class="px-3 py-1 rounded-full border hover:bg-gray-50">Details</a>
            <button (click)="remove(m.id)" class="px-3 py-1 rounded-full border hover:bg-gray-50">Remove</button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>
</div>
